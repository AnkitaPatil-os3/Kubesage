import{d as F,hr as b,r as g,av as P,j as H,o as w,c as y,w as a,e as n,f as M,g as o,b as I,H as J,I as S,B as z,J as A,hb as E}from"./index-BdUTWwbS.js";import{_ as G,a as K}from"./FormItem-HvJ2BmDO.js";import{_ as O}from"./InputNumber-B8kyAtFq.js";const Y=F({__name:"DictModal",props:{modalName:{default:""},dictCode:{},isRoot:{type:Boolean,default:!1}},emits:["open","close"],setup(u,{expose:R,emit:C}){const c=C,{bool:d,setTrue:k,setFalse:T}=b(!1),{bool:B,setTrue:N,setFalse:h}=b(!1),p={label:"",code:""},t=g({...p}),i=P("add"),x=H(()=>`${{add:"添加",view:"查看",edit:"编辑"}[i.value]}${u.modalName}`);async function U(l="add",e){c("open"),i.value=l,k(),await{async add(){t.value={...p},t.value.isRoot=u.isRoot?1:0,u.dictCode&&(t.value.code=u.dictCode)},async view(){e&&(t.value={...e})},async edit(){e&&(t.value={...e})}}[l]()}function f(){T(),h(),c("close")}R({openModal:U});const _=g();async function V(){const l={async add(){return new Promise(e=>{setTimeout(()=>{window.$message.success("模拟新增成功"),e(!0)},2e3)})},async edit(){return new Promise(e=>{setTimeout(()=>{window.$message.success("模拟编辑成功"),e(!0)},2e3)})},async view(){return!0}};await _.value?.validate(),N(),await l[i.value]()&&f()}const $={label:{required:!0,message:"请输入字典名称",trigger:["input","blur"]},code:{required:!0,message:"请输入字典码",trigger:["input","blur"]},value:{required:!0,message:"请输入字典值",type:"number",trigger:["input","blur"]}};return(l,e)=>{const r=S,m=G,q=O,L=K,v=z,j=A,D=E;return w(),y(D,{show:o(d),"onUpdate:show":e[3]||(e[3]=s=>J(d)?d.value=s:null),"mask-closable":!1,preset:"card",title:o(x),class:"w-700px",segmented:{content:!0,action:!0}},{action:a(()=>[n(j,{justify:"center"},{default:a(()=>[n(v,{onClick:f},{default:a(()=>e[4]||(e[4]=[M(" 取消 ")])),_:1}),n(v,{type:"primary",loading:o(B),onClick:V},{default:a(()=>e[5]||(e[5]=[M(" 提交 ")])),_:1},8,["loading"])]),_:1})]),default:a(()=>[n(L,{ref_key:"formRef",ref:_,rules:$,"label-placement":"left",model:o(t),"label-width":100,disabled:o(i)==="view"},{default:a(()=>[n(m,{label:"字典名称",path:"label"},{default:a(()=>[n(r,{value:o(t).label,"onUpdate:value":e[0]||(e[0]=s=>o(t).label=s)},null,8,["value"])]),_:1}),n(m,{label:"字典码",path:"code"},{default:a(()=>[n(r,{value:o(t).code,"onUpdate:value":e[1]||(e[1]=s=>o(t).code=s),disabled:!l.isRoot},null,8,["value","disabled"])]),_:1}),l.isRoot?I("",!0):(w(),y(m,{key:0,label:"字典值",path:"value"},{default:a(()=>[n(q,{value:o(t).value,"onUpdate:value":e[2]||(e[2]=s=>o(t).value=s),min:0},null,8,["value"])]),_:1}))]),_:1},8,["model","disabled"])]),_:1},8,["show","title"])}}});export{Y as _};
