import{j as B,r as l,z as N,o as u,c as d,w as t,b as s,e as c,A as h,a as f,l as F,F as S,L as C,hn as E,B as P,s as R}from"./index-Bby_nErz.js";import{a as I}from"./axios-CCb-kr4I.js";import{N as T}from"./text-BM-U9Ls2.js";import{_ as V,a as j}from"./FormItem-KNfBvfja.js";const A={class:"flex justify-between mt-4"},L={__name:"configuration",setup(M){const a=l({kubeconfig_data:""}),m=l(null),n=l(!1),r=N(),i=()=>{a.value={kubeconfig_data:""}},_=async()=>{n.value=!0;try{const o=await I.post("http://172.16.1.56:8000/api/v3/onboardkubernetes/",a.value);r.success("Bootstrapping is successful"),console.log("API RESPONSE from backend",o)}catch(o){o.response?r.error(`Bootstrapping process failed: ${o.response.data.message||"Try again."}`):o.request?r.error("Bootstrapping process failed: No response from server. Please try again."):r.error(`Bootstrapping process failed: ${o.message}. Please try again.`)}finally{n.value=!1,i()}};return(o,e)=>{const g=T,b=C,v=V,k=E,p=P,y=j,w=R;return u(),d(w,{class:"p-6 rounded-lg shadow-md"},{default:t(()=>[s(g,{class:"text-2xl font-bold"},{default:t(()=>e[1]||(e[1]=[c(" Bootstrap the k8s Server ")])),_:1}),s(y,{onSubmit:h(_,["prevent"]),model:a.value,ref_key:"formRef",ref:m},{default:t(()=>[s(v,{label:"Kubeconfig File Content",path:"kubeconfig_data"},{default:t(()=>[s(b,{type:"textarea",value:a.value.kubeconfig_data,"onUpdate:value":e[0]||(e[0]=x=>a.value.kubeconfig_data=x),rows:"5",placeholder:"Enter your kubeconfig data here",class:"w-full"},null,8,["value"])]),_:1}),f("div",A,[s(p,{type:"primary",onClick:_,loading:n.value,class:"w-full md:w-auto"},{default:t(()=>[n.value?(u(),d(k,{key:0},{default:t(()=>e[2]||(e[2]=[f("i",{class:"n-icon-loading"},null,-1)])),_:1})):(u(),F(S,{key:1},[c("Submit")],64))]),_:1},8,["loading"]),s(p,{onClick:i,disabled:n.value,class:"w-full md:w-auto",ghost:""},{default:t(()=>e[3]||(e[3]=[c("Reset")])),_:1},8,["disabled"])])]),_:1},8,["model"])]),_:1})}}},K=B(L,[["__scopeId","data-v-dd67b506"]]);export{K as default};
