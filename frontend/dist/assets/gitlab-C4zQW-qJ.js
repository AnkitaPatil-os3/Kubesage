import{r as i,z as y,o as d,c,w as l,b as a,e as v,A as P,a as b,l as B,F as x,L as T,hn as N,B as S,s as A}from"./index-Bby_nErz.js";import{a as h}from"./axios-CCb-kr4I.js";import{N as L}from"./text-BM-U9Ls2.js";import{_ as F,a as R}from"./FormItem-KNfBvfja.js";const C={class:"flex justify-between mt-4"},$={__name:"gitlab",setup(E){const s=i({ipAdr:"",serverUser:"",serverPass:"",GitlabToken:"",GitlabUrl:""}),w=i(null),r=i(!1),p=y(),m=()=>{s.value={ipAdr:"",serverUser:"",serverPass:"",GitlabToken:"",GitlabUrl:""}},f=async()=>{r.value=!0;try{const t=await h.post("http://172.16.1.56:8000/api/v3/OnboardGitlab/",s.value);p.success("Bootstrapping is successful"),console.log("API RESPONSE",t)}catch(t){t.response?p.error(`Bootstrapping process failed: ${t.response.data.message||"Try again."}`):t.request?p.error("Bootstrapping process failed: No response from server. Please try again."):p.error(`Bootstrapping process failed: ${t.message}. Please try again.`)}finally{r.value=!1,m()}};return(t,e)=>{const g=L,n=T,u=F,U=N,_=S,G=R,k=A;return d(),c(k,{class:"p-6 rounded-lg shadow-md"},{default:l(()=>[a(g,{class:"text-2xl font-bold"},{default:l(()=>e[5]||(e[5]=[v(" Bootstrap the Gitlab Server ")])),_:1}),a(G,{onSubmit:P(f,["prevent"]),model:s.value,ref_key:"formRef",ref:w},{default:l(()=>[a(u,{label:"Server IP/Hostname",path:"ipAdr"},{default:l(()=>[a(n,{value:s.value.ipAdr,"onUpdate:value":e[0]||(e[0]=o=>s.value.ipAdr=o),placeholder:"0.0.0.0",class:"w-full"},null,8,["value"])]),_:1}),a(u,{label:"Server Username",path:"serverUser"},{default:l(()=>[a(n,{value:s.value.serverUser,"onUpdate:value":e[1]||(e[1]=o=>s.value.serverUser=o),placeholder:"Username",class:"w-full"},null,8,["value"])]),_:1}),a(u,{label:"Server Password",path:"serverPass"},{default:l(()=>[a(n,{value:s.value.serverPass,"onUpdate:value":e[2]||(e[2]=o=>s.value.serverPass=o),"show-password-on":"mousedown",placeholder:"Password",type:"password",class:"w-full"},null,8,["value"])]),_:1}),a(u,{label:"GitLab Url",path:"GitlabUrl"},{default:l(()=>[a(n,{value:s.value.GitlabUrl,"onUpdate:value":e[3]||(e[3]=o=>s.value.GitlabUrl=o),type:"url",placeholder:"GitLab Url",class:"w-full"},null,8,["value"])]),_:1}),a(u,{label:"GitLab Token",path:"GitlabToken"},{default:l(()=>[a(n,{value:s.value.GitlabToken,"onUpdate:value":e[4]||(e[4]=o=>s.value.GitlabToken=o),placeholder:"GitLab Token",type:"password","show-password-on":"mousedown",class:"w-full"},null,8,["value"])]),_:1}),b("div",C,[a(_,{type:"primary",onClick:f,loading:r.value,class:"w-full md:w-auto"},{default:l(()=>[r.value?(d(),c(U,{key:0},{default:l(()=>e[6]||(e[6]=[b("i",{class:"n-icon-loading"},null,-1)])),_:1})):(d(),B(x,{key:1},[v("Submit")],64))]),_:1},8,["loading"]),a(_,{onClick:m,disabled:r.value,class:"w-full md:w-auto",ghost:""},{default:l(()=>e[7]||(e[7]=[v("Reset")])),_:1},8,["disabled"])])]),_:1},8,["model"])]),_:1})}}};export{$ as default};
