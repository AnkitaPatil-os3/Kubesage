import{A,K as St,d as ee,L as _t,M as $,r as k,O as Mt,G as d,T as Oe,P as Nt,Q as Ke,j as b,R as ge,S as Pt,U as qe,V as Tt,W as Ft,X as Ae,Y as be,Z as Ot,$ as Kt,a0 as Lt,a1 as Ze,a2 as Je,a3 as et,a4 as Bt,a5 as It,a6 as Vt,a7 as tt,a8 as At,a9 as $t,z as pe,aa as We,ab as Ne,ac as G,D as nt,ad as Fe,C as jt,ae as zt,af as Dt,ag as Ge,ah as Ut,ai as Et,h as Qe,aj as Ht,ak as qt,al as Wt,am as Gt,E as Qt,an as Xt,ao as Yt,ap as Zt,aq as Xe,ar as Jt,as as en,at as tn,au as le,av as nn,m as an,o as at,c as lt,g as Q,w as H,e as j,f as fe,t as Pe,H as ln,i as he,B as on,l as rn}from"./index-BdUTWwbS.js";import{_ as sn}from"./Checkbox-DOCh64z2.js";import{N as un}from"./headers-C8Po6H2r.js";import{_ as dn,a as cn}from"./FormItem-HvJ2BmDO.js";const fn=A("base-menu-mask",`
 position: absolute;
 left: 0;
 right: 0;
 top: 0;
 bottom: 0;
 display: flex;
 align-items: center;
 justify-content: center;
 text-align: center;
 padding: 14px;
 overflow: hidden;
`,[St()]),hn=ee({name:"BaseMenuMask",props:{clsPrefix:{type:String,required:!0}},setup(t){_t("-base-menu-mask",fn,$(t,"clsPrefix"));const o=k(null);let a=null;const l=k(!1);return Mt(()=>{a!==null&&window.clearTimeout(a)}),Object.assign({message:o,show:l},{showOnce(g,y=1500){a&&window.clearTimeout(a),l.value=!0,o.value=g,a=window.setTimeout(()=>{l.value=!1,o.value=null},y)}})},render(){return d(Oe,{name:"fade-in-transition"},{default:()=>this.show?d("div",{class:`${this.clsPrefix}-base-menu-mask`},this.message):null})}}),ye=Nt("n-cascader"),Ye=ee({name:"NCascaderOption",props:{tmNode:{type:Object,required:!0}},setup(t){const{expandTriggerRef:o,remoteRef:a,multipleRef:l,mergedValueRef:c,checkedKeysRef:g,indeterminateKeysRef:y,hoverKeyPathRef:m,keyboardKeyRef:w,loadingKeySetRef:M,cascadeRef:u,mergedCheckStrategyRef:S,onLoadRef:N,mergedClsPrefixRef:T,mergedThemeRef:z,labelFieldRef:D,showCheckboxRef:X,renderPrefixRef:p,renderSuffixRef:_,updateHoverKey:F,updateKeyboardKey:P,addLoadingKey:V,deleteLoadingKey:U,closeMenu:oe,doCheck:te,doUncheck:we,renderLabelRef:f}=Ke(ye),R=b(()=>t.tmNode.key),K=b(()=>{const{value:O}=o,{value:W}=a;return!W&&O==="hover"}),B=b(()=>{if(K.value)return ue}),Y=b(()=>{if(K.value)return ke}),E=ge(()=>{const{value:O}=l;return O?g.value.includes(R.value):c.value===R.value}),re=ge(()=>l.value?y.value.includes(R.value):!1),Le=ge(()=>m.value.includes(R.value)),Be=ge(()=>{const{value:O}=w;return O===null?!1:O===R.value}),Z=ge(()=>a.value?M.value.has(R.value):!1),ie=b(()=>t.tmNode.isLeaf),se=b(()=>t.tmNode.disabled),q=b(()=>t.tmNode.rawNode[D.value]),J=b(()=>t.tmNode.shallowLoaded);function ne(O){if(se.value)return;const{value:W}=a,{value:I}=M,{value:xe}=N,{value:L}=R,{value:Ce}=ie,{value:Se}=J;Ae(O,"checkbox")||(W&&!Se&&!I.has(L)&&xe&&(V(L),xe(t.tmNode.rawNode).then(()=>{U(L)}).catch(()=>{U(L)})),F(L),P(L)),Ce&&Re()}function ue(){if(!K.value||se.value)return;const{value:O}=R;F(O),P(O)}function ke(){K.value&&ue()}function ve(){const{value:O}=ie;O||Re()}function Re(){const{value:O}=l,{value:W}=R;O?re.value||E.value?we(W):te(W):(te(W),oe(!0))}return{checkStrategy:S,multiple:l,cascade:u,checked:E,indeterminate:re,hoverPending:Le,keyboardPending:Be,isLoading:Z,showCheckbox:X,isLeaf:ie,disabled:se,label:q,mergedClsPrefix:T,mergedTheme:z,handleClick:ne,handleCheckboxUpdateValue:ve,mergedHandleMouseEnter:B,mergedHandleMouseMove:Y,renderLabel:f,renderPrefix:p,renderSuffix:_}},render(){const{mergedClsPrefix:t,showCheckbox:o,renderLabel:a,renderPrefix:l,renderSuffix:c}=this;let g=null;if(o||l){const w=this.showCheckbox?d(sn,{focusable:!1,"data-checkbox":!0,disabled:this.disabled,checked:this.checked,indeterminate:this.indeterminate,theme:this.mergedTheme.peers.Checkbox,themeOverrides:this.mergedTheme.peerOverrides.Checkbox,onUpdateChecked:this.handleCheckboxUpdateValue}):null;g=d("div",{class:`${t}-cascader-option__prefix`},l?l({option:this.tmNode.rawNode,checked:this.checked,node:w}):w)}let y=null;const m=d("div",{class:`${t}-cascader-option-icon-placeholder`},this.isLeaf?this.checkStrategy==="child"&&!(this.multiple&&this.cascade)?d(Oe,{name:"fade-in-scale-up-transition"},{default:()=>this.checked?d(qe,{clsPrefix:t,class:`${t}-cascader-option-icon ${t}-cascader-option-icon--checkmark`},{default:()=>d(Ft,null)}):null}):null:d(Pt,{clsPrefix:t,scale:.85,strokeWidth:24,show:this.isLoading,class:`${t}-cascader-option-icon`},{default:()=>d(qe,{clsPrefix:t,key:"arrow",class:`${t}-cascader-option-icon ${t}-cascader-option-icon--arrow`},{default:()=>d(Tt,null)})}));return y=d("div",{class:`${t}-cascader-option__suffix`},c?c({option:this.tmNode.rawNode,checked:this.checked,node:m}):m),d("div",{class:[`${t}-cascader-option`,this.keyboardPending||this.hoverPending&&`${t}-cascader-option--pending`,this.disabled&&`${t}-cascader-option--disabled`,this.showCheckbox&&`${t}-cascader-option--show-prefix`],onMouseenter:this.mergedHandleMouseEnter,onMousemove:this.mergedHandleMouseMove,onClick:this.handleClick},g,d("span",{class:`${t}-cascader-option__label`},a?a(this.tmNode.rawNode,this.checked):this.label),y)}}),vn=ee({name:"CascaderSubmenu",props:{depth:{type:Number,required:!0},tmNodes:{type:Array,required:!0}},setup(){const{virtualScrollRef:t,mergedClsPrefixRef:o,mergedThemeRef:a,optionHeightRef:l}=Ke(ye),c=k(null),g=k(null),y={scroll(m,w){var M,u;t.value?(M=g.value)===null||M===void 0||M.scrollTo({index:m}):(u=c.value)===null||u===void 0||u.scrollTo({index:m,elSize:w})}};return Object.assign({mergedClsPrefix:o,mergedTheme:a,scrollbarInstRef:c,vlInstRef:g,virtualScroll:t,itemSize:b(()=>be(l.value)),handleVlScroll:()=>{var m;(m=c.value)===null||m===void 0||m.sync()},getVlContainer:()=>{var m;return(m=g.value)===null||m===void 0?void 0:m.listElRef},getVlContent:()=>{var m;return(m=g.value)===null||m===void 0?void 0:m.itemsElRef}},y)},render(){const{mergedClsPrefix:t,mergedTheme:o,virtualScroll:a}=this;return d("div",{class:[a&&`${t}-cascader-submenu--virtual`,`${t}-cascader-submenu`]},d(Ot,{ref:"scrollbarInstRef",theme:o.peers.Scrollbar,themeOverrides:o.peerOverrides.Scrollbar,container:a?this.getVlContainer:void 0,content:a?this.getVlContent:void 0},{default:()=>a?d(Kt,{items:this.tmNodes,itemSize:this.itemSize,onScroll:this.handleVlScroll,showScrollbar:!1,ref:"vlInstRef"},{default:({item:l})=>d(Ye,{key:l.key,tmNode:l})}):this.tmNodes.map(l=>d(Ye,{key:l.key,tmNode:l}))}))}}),mn=ee({name:"NCascaderMenu",props:{value:[String,Number,Array],placement:{type:String,default:"bottom-start"},show:Boolean,menuModel:{type:Array,required:!0},loading:Boolean,onFocus:{type:Function,required:!0},onBlur:{type:Function,required:!0},onKeydown:{type:Function,required:!0},onMousedown:{type:Function,required:!0},onTabout:{type:Function,required:!0}},setup(t){const{localeRef:o,isMountedRef:a,mergedClsPrefixRef:l,syncCascaderMenuPosition:c,handleCascaderMenuClickOutside:g,mergedThemeRef:y,getColumnStyleRef:m}=Ke(ye),w=[],M=k(null),u=k(null);function S(){c()}Lt(u,S);function N(p){var _;const{value:{loadingRequiredMessage:F}}=o;(_=M.value)===null||_===void 0||_.showOnce(F(p))}function T(p){g(p)}function z(p){const{value:_}=u;_&&(_.contains(p.relatedTarget)||t.onFocus(p))}function D(p){const{value:_}=u;_&&(_.contains(p.relatedTarget)||t.onBlur(p))}return Object.assign({isMounted:a,mergedClsPrefix:l,selfElRef:u,submenuInstRefs:w,maskInstRef:M,mergedTheme:y,getColumnStyle:m,handleFocusin:z,handleFocusout:D,handleClickOutside:T},{scroll(p,_,F){const P=w[p];P&&P.scroll(_,F)},showErrorMessage:N})},render(){const{submenuInstRefs:t,mergedClsPrefix:o,mergedTheme:a}=this;return d(Oe,{name:"fade-in-scale-up-transition",appear:this.isMounted},{default:()=>this.show?Ze(d("div",{tabindex:"0",ref:"selfElRef",class:`${o}-cascader-menu`,onMousedown:this.onMousedown,onFocusin:this.handleFocusin,onFocusout:this.handleFocusout,onKeydown:this.onKeydown},this.menuModel[0].length?d("div",{class:`${o}-cascader-submenu-wrapper`},this.menuModel.map((l,c)=>{var g;return d(vn,{style:(g=this.getColumnStyle)===null||g===void 0?void 0:g.call(this,{level:c}),ref:y=>{y&&(t[c]=y)},key:c,tmNodes:l,depth:c+1})}),d(hn,{clsPrefix:o,ref:"maskInstRef"})):d("div",{class:`${o}-cascader-menu__empty`},et(this.$slots.empty,()=>[d(Bt,{theme:a.peers.Empty,themeOverrides:a.peerOverrides.Empty})])),It(this.$slots.action,l=>l&&d("div",{class:`${o}-cascader-menu-action`,"data-action":!0},l)),d(Vt,{onFocus:this.onTabout})),[[Je,this.handleClickOutside,void 0,{capture:!0}]]):null})}});function Te(t){return t?t.map(o=>o.rawNode):null}function gn(t,o,a,l){const c=[],g=[];function y(m){for(const w of m){if(w.disabled)continue;const{rawNode:M}=w;g.push(M),(w.isLeaf||!o)&&c.push({label:$e(w,l,a),value:w.key,rawNode:w.rawNode,path:Array.from(g)}),!w.isLeaf&&w.children&&y(w.children),g.pop()}}return y(t),c}function $e(t,o,a){const l=[];for(;t;)l.push(t.rawNode[a]),t=t.parent;return l.reverse().join(o)}const pn=ee({name:"NCascaderSelectMenu",props:{value:{type:[String,Number,Array],default:null},show:Boolean,pattern:{type:String,default:""},multiple:Boolean,tmNodes:{type:Array,default:()=>[]},filter:Function,labelField:{type:String,required:!0},separator:{type:String,required:!0}},setup(t){const{isMountedRef:o,mergedValueRef:a,mergedClsPrefixRef:l,mergedThemeRef:c,mergedCheckStrategyRef:g,slots:y,syncSelectMenuPosition:m,closeMenu:w,handleSelectMenuClickOutside:M,doUncheck:u,doCheck:S,clearPattern:N}=Ke(ye),T=k(null),z=b(()=>gn(t.tmNodes,g.value==="child",t.labelField,t.separator)),D=b(()=>{const{filter:f}=t;if(f)return f;const{labelField:R}=t;return(K,B,Y)=>Y.some(E=>E[R]&&~E[R].toLowerCase().indexOf(K.toLowerCase()))}),X=b(()=>{const{pattern:f}=t,{value:R}=D;return(f?z.value.filter(K=>R(f,K.rawNode,K.path)):z.value).map(K=>({value:K.value,label:K.label}))}),p=b(()=>tt(X.value,At("value","children")));function _(){m()}function F(f){P(f)}function P(f){if(t.multiple){const{value:R}=a;Array.isArray(R)?R.includes(f.key)?u(f.key):S(f.key):R===null&&S(f.key),N()}else S(f.key),w(!0)}function V(){var f;(f=T.value)===null||f===void 0||f.prev()}function U(){var f;(f=T.value)===null||f===void 0||f.next()}function oe(){var f;if(T){const R=(f=T.value)===null||f===void 0?void 0:f.getPendingTmNode();return R&&P(R),!0}return!1}function te(f){M(f)}return Object.assign({isMounted:o,mergedTheme:c,mergedClsPrefix:l,menuInstRef:T,selectTreeMate:p,handleResize:_,handleToggle:F,handleClickOutside:te,cascaderSlots:y},{prev:V,next:U,enter:oe})},render(){const{mergedClsPrefix:t,isMounted:o,mergedTheme:a,cascaderSlots:l}=this;return d(Oe,{name:"fade-in-scale-up-transition",appear:o},{default:()=>this.show?Ze(d($t,{ref:"menuInstRef",onResize:this.handleResize,clsPrefix:t,class:`${t}-cascader-menu`,autoPending:!0,themeOverrides:a.peerOverrides.InternalSelectMenu,theme:a.peers.InternalSelectMenu,treeMate:this.selectTreeMate,multiple:this.multiple,value:this.value,onToggle:this.handleToggle},{empty:()=>et(l["not-found"],()=>[])}),[[Je,this.handleClickOutside,void 0,{capture:!0}]]):null})}}),bn=pe([A("cascader-menu",`
 outline: none;
 position: relative;
 margin: 4px 0;
 display: flex;
 flex-flow: column nowrap;
 border-radius: var(--n-menu-border-radius);
 overflow: hidden;
 box-shadow: var(--n-menu-box-shadow);
 color: var(--n-option-text-color);
 background-color: var(--n-menu-color);
 `,[We({transformOrigin:"inherit",duration:"0.2s"}),Ne("empty",`
 display: flex;
 padding: 12px 32px;
 flex: 1;
 justify-content: center;
 `),A("scrollbar",`
 width: 100%;
 `),A("base-menu-mask",`
 background-color: var(--n-menu-mask-color);
 `),A("base-loading",`
 color: var(--n-loading-color);
 `),A("cascader-submenu-wrapper",`
 position: relative;
 display: flex;
 flex-wrap: nowrap;
 `),A("cascader-submenu",`
 height: var(--n-menu-height);
 min-width: var(--n-column-width);
 position: relative;
 `,[G("virtual",`
 width: var(--n-column-width);
 `),A("scrollbar-content",`
 position: relative;
 `),pe("&:first-child",`
 border-top-left-radius: var(--n-menu-border-radius);
 border-bottom-left-radius: var(--n-menu-border-radius);
 `),pe("&:last-child",`
 border-top-right-radius: var(--n-menu-border-radius);
 border-bottom-right-radius: var(--n-menu-border-radius);
 `),pe("&:not(:first-child)",`
 border-left: 1px solid var(--n-menu-divider-color);
 `)]),A("cascader-menu-action",`
 box-sizing: border-box;
 padding: 8px;
 border-top: 1px solid var(--n-menu-divider-color);
 `),A("cascader-option",`
 height: var(--n-option-height);
 line-height: var(--n-option-height);
 font-size: var(--n-option-font-size);
 padding: 0 0 0 18px;
 box-sizing: border-box;
 min-width: 182px;
 background-color: #0000;
 display: flex;
 align-items: center;
 white-space: nowrap;
 position: relative;
 cursor: pointer;
 transition:
 background-color .2s var(--n-bezier),
 color 0.2s var(--n-bezier);
 `,[G("show-prefix",`
 padding-left: 0;
 `),Ne("label",`
 flex: 1 0 0;
 overflow: hidden;
 text-overflow: ellipsis;
 `),Ne("prefix",`
 min-width: 32px;
 display: flex;
 align-items: center;
 justify-content: center;
 `),Ne("suffix",`
 min-width: 32px;
 display: flex;
 align-items: center;
 justify-content: center;
 `),A("cascader-option-icon-placeholder",`
 line-height: 0;
 position: relative;
 width: 16px;
 height: 16px;
 font-size: 16px;
 `,[A("cascader-option-icon",[G("checkmark",`
 color: var(--n-option-check-mark-color);
 `,[We({originalTransition:"background-color .3s var(--n-bezier), box-shadow .3s var(--n-bezier)"})]),G("arrow",`
 color: var(--n-option-arrow-color);
 `)])]),G("selected",`
 color: var(--n-option-text-color-active);
 `),G("active",`
 color: var(--n-option-text-color-active);
 background-color: var(--n-option-color-hover);
 `),G("pending",`
 background-color: var(--n-option-color-hover);
 `),pe("&:hover",`
 background-color: var(--n-option-color-hover);
 `),G("disabled",`
 color: var(--n-option-text-color-disabled);
 background-color: #0000;
 cursor: not-allowed;
 `,[A("cascader-option-icon",[G("arrow",`
 color: var(--n-option-text-color-disabled);
 `)])])])]),A("cascader",`
 z-index: auto;
 position: relative;
 width: 100%;
 `)]),yn=Object.assign(Object.assign({},nt.props),{allowCheckingNotLoaded:Boolean,to:Fe.propTo,bordered:{type:Boolean,default:void 0},options:{type:Array,default:()=>[]},value:[String,Number,Array],defaultValue:{type:[String,Number,Array],default:null},placeholder:String,multiple:Boolean,size:String,filterable:Boolean,disabled:{type:Boolean,default:void 0},disabledField:{type:String,default:"disabled"},expandTrigger:{type:String,default:"click"},clearable:Boolean,clearFilterAfterSelect:{type:Boolean,default:!0},remote:Boolean,onLoad:Function,separator:{type:String,default:" / "},filter:Function,placement:{type:String,default:"bottom-start"},cascade:{type:Boolean,default:!0},leafOnly:Boolean,showPath:{type:Boolean,default:!0},show:{type:Boolean,default:void 0},maxTagCount:[String,Number],ellipsisTagPopoverProps:Object,menuProps:Object,filterMenuProps:Object,virtualScroll:{type:Boolean,default:!0},checkStrategy:{type:String,default:"all"},valueField:{type:String,default:"value"},labelField:{type:String,default:"label"},childrenField:{type:String,default:"children"},renderLabel:Function,status:String,"onUpdate:value":[Function,Array],onUpdateValue:[Function,Array],"onUpdate:show":[Function,Array],onUpdateShow:[Function,Array],onBlur:Function,onFocus:Function,getColumnStyle:Function,renderPrefix:Function,renderSuffix:Function,onChange:[Function,Array]}),wn=ee({name:"Cascader",props:yn,setup(t,{slots:o}){const{mergedBorderedRef:a,mergedClsPrefixRef:l,namespaceRef:c,inlineThemeDisabled:g}=jt(t),y=nt("Cascader","-cascader",bn,zt,t,l),{localeRef:m}=Dt("Cascader"),w=k(t.defaultValue),M=b(()=>t.value),u=Ge(M,w),S=b(()=>t.leafOnly?"child":t.checkStrategy),N=k(""),T=Ut(t),{mergedSizeRef:z,mergedDisabledRef:D,mergedStatusRef:X}=T,p=k(null),_=k(null),F=k(null),P=k(null),V=k(null),U=k(new Set),oe=k(null),te=k(null),we=Fe(t),f=k(!1),R=e=>{U.value.add(e)},K=e=>{U.value.delete(e)},B=b(()=>{const{valueField:e,childrenField:n,disabledField:r}=t;return tt(t.options,{getDisabled(h){return h[r]},getKey(h){return h[e]},getChildren(h){return h[n]}})}),Y=b(()=>{const{cascade:e,multiple:n}=t;return n&&Array.isArray(u.value)?B.value.getCheckedKeys(u.value,{cascade:e,allowNotLoaded:t.allowCheckingNotLoaded}):{checkedKeys:[],indeterminateKeys:[]}}),E=b(()=>Y.value.checkedKeys),re=b(()=>Y.value.indeterminateKeys),Le=b(()=>{const{treeNodePath:e,treeNode:n}=B.value.getPath(V.value);let r;return n===null?r=[B.value.treeNodes]:(r=e.map(h=>h.siblings),!n.isLeaf&&!U.value.has(n.key)&&n.children&&r.push(n.children)),r}),Be=b(()=>{const{keyPath:e}=B.value.getPath(V.value);return e}),Z=b(()=>y.value.self.optionHeight);Et(t.options)&&Qe(t.options,(e,n)=>{e!==n&&(V.value=null,P.value=null)});const ie=k(!1);function se(e){const{onUpdateShow:n,"onUpdate:show":r}=t;n&&le(n,e),r&&le(r,e),ie.value=e}function q(e,n,r){const{onUpdateValue:h,"onUpdate:value":i,onChange:x}=t,{nTriggerFormInput:s,nTriggerFormChange:C}=T;h&&le(h,e,n,r),i&&le(i,e,n,r),x&&le(x,e,n,r),w.value=e,s(),C()}function J(e){P.value=e}function ne(e){V.value=e}function ue(e){const{value:{getNode:n}}=B;return e.map(r=>{var h;return((h=n(r))===null||h===void 0?void 0:h.rawNode)||null})}function ke(e){var n;const{cascade:r,multiple:h,filterable:i}=t,{value:{check:x,getNode:s,getPath:C}}=B;if(h)try{const{checkedKeys:v}=x(e,Y.value.checkedKeys,{cascade:r,checkStrategy:S.value,allowNotLoaded:t.allowCheckingNotLoaded});q(v,ue(v),v.map(ce=>{var me;return Te((me=C(ce))===null||me===void 0?void 0:me.treeNodePath)})),i&&Ie(),P.value=e,V.value=e}catch(v){if(v instanceof Jt){if(p.value){const ce=s(e);ce!==null&&p.value.showErrorMessage(ce.rawNode[t.labelField])}}else throw v}else if(S.value==="child"){const v=s(e);if(v?.isLeaf)q(e,v.rawNode,Te(C(e).treeNodePath));else return!1}else{const v=s(e);q(e,v?.rawNode||null,Te((n=C(e))===null||n===void 0?void 0:n.treeNodePath))}return!0}function ve(e){const{cascade:n,multiple:r}=t;if(r){const{value:{uncheck:h,getNode:i,getPath:x}}=B,{checkedKeys:s}=h(e,Y.value.checkedKeys,{cascade:n,checkStrategy:S.value,allowNotLoaded:t.allowCheckingNotLoaded});q(s,s.map(C=>{var v;return((v=i(C))===null||v===void 0?void 0:v.rawNode)||null}),s.map(C=>{var v;return Te((v=x(C))===null||v===void 0?void 0:v.treeNodePath)})),P.value=e,V.value=e}}const Re=b(()=>{if(t.multiple){const{showPath:e,separator:n,labelField:r,cascade:h}=t,{getCheckedKeys:i,getNode:x}=B.value;return i(E.value,{cascade:h,checkStrategy:S.value,allowNotLoaded:t.allowCheckingNotLoaded}).checkedKeys.map(C=>{const v=x(C);return v===null?{label:String(C),value:C}:{label:e?$e(v,n,r):v.rawNode[r],value:v.key}})}else return[]}),O=b(()=>{const{multiple:e,showPath:n,separator:r,labelField:h}=t,{value:i}=u;if(!e&&!Array.isArray(i)){const{getNode:x}=B.value;if(i===null)return null;const s=x(i);return s===null?{label:String(i),value:i}:{label:n?$e(s,r,h):s.rawNode[h],value:s.key}}else return null}),W=$(t,"show"),I=Ge(W,ie),xe=b(()=>{const{placeholder:e}=t;return e!==void 0?e:m.value.placeholder}),L=b(()=>!!(t.filterable&&N.value));Qe(I,e=>{if(!e||t.multiple)return;const{value:n}=u;!Array.isArray(n)&&n!==null?(P.value=n,V.value=n,Ht(()=>{var r;if(!I.value)return;const{value:h}=V;if(u.value!==null){const i=B.value.getNode(h);i&&((r=p.value)===null||r===void 0||r.scroll(i.level,i.index,be(Z.value)))}})):(P.value=null,V.value=null)},{immediate:!0});function Ce(e){const{onBlur:n}=t,{nTriggerFormBlur:r}=T;n&&le(n,e),r()}function Se(e){const{onFocus:n}=t,{nTriggerFormFocus:r}=T;n&&le(n,e),r()}function Ie(){var e;(e=F.value)===null||e===void 0||e.focusInput()}function ot(){var e;(e=F.value)===null||e===void 0||e.focus()}function _e(){D.value||(N.value="",se(!0),t.filterable&&Ie())}function ae(e=!1){e&&ot(),se(!1),N.value=""}function je(e){var n;L.value||I.value&&(!((n=F.value)===null||n===void 0)&&n.$el.contains(en(e))||ae())}function rt(e){L.value&&je(e)}function ze(){t.clearFilterAfterSelect&&(N.value="")}function Me(e){var n,r,h;const{value:i}=P,{value:x}=B;switch(e){case"prev":if(i!==null){const s=x.getPrev(i,{loop:!0});s!==null&&(J(s.key),(n=p.value)===null||n===void 0||n.scroll(s.level,s.index,be(Z.value)))}break;case"next":if(i===null){const s=x.getFirstAvailableNode();s!==null&&(J(s.key),(r=p.value)===null||r===void 0||r.scroll(s.level,s.index,be(Z.value)))}else{const s=x.getNext(i,{loop:!0});s!==null&&(J(s.key),(h=p.value)===null||h===void 0||h.scroll(s.level,s.index,be(Z.value)))}break;case"child":if(i!==null){const s=x.getNode(i);if(s!==null)if(s.shallowLoaded){const C=x.getChild(i);C!==null&&(ne(i),J(C.key))}else{const{value:C}=U;if(!C.has(i)){R(i),ne(i);const{onLoad:v}=t;v&&v(s.rawNode).then(()=>{K(i)}).catch(()=>{K(i)})}}}break;case"parent":if(i!==null){const s=x.getParent(i);if(s!==null){J(s.key);const C=s.getParent();ne(C===null?null:C.key)}}break}}function De(e){var n,r;switch(e.key){case" ":case"ArrowDown":case"ArrowUp":if(t.filterable&&I.value)break;e.preventDefault();break}if(!Ae(e,"action"))switch(e.key){case" ":if(t.filterable)return;case"Enter":if(!I.value)_e();else{const{value:h}=L,{value:i}=P;if(h)_.value&&_.value.enter()&&ze();else if(i!==null)if(E.value.includes(i)||re.value.includes(i))ve(i);else{const x=ke(i);!t.multiple&&x&&ae(!0)}}break;case"ArrowUp":e.preventDefault(),I.value&&(L.value?(n=_.value)===null||n===void 0||n.prev():Me("prev"));break;case"ArrowDown":e.preventDefault(),I.value?L.value?(r=_.value)===null||r===void 0||r.next():Me("next"):_e();break;case"ArrowLeft":e.preventDefault(),I.value&&!L.value&&Me("parent");break;case"ArrowRight":e.preventDefault(),I.value&&!L.value&&Me("child");break;case"Escape":I.value&&(tn(e),ae(!0))}}function it(e){De(e)}function st(e){e.stopPropagation(),t.multiple?q([],[],[]):q(null,null,null)}function ut(e){var n;!((n=p.value)===null||n===void 0)&&n.$el.contains(e.relatedTarget)||(f.value=!0,Se(e))}function dt(e){var n;!((n=p.value)===null||n===void 0)&&n.$el.contains(e.relatedTarget)||(f.value=!1,Ce(e),ae())}function ct(e){var n;!((n=F.value)===null||n===void 0)&&n.$el.contains(e.relatedTarget)||(f.value=!0,Se(e))}function ft(e){var n;!((n=F.value)===null||n===void 0)&&n.$el.contains(e.relatedTarget)||(f.value=!1,Ce(e))}function ht(e){Ae(e,"action")||t.multiple&&t.filter&&(e.preventDefault(),Ie())}function vt(){ae(!0)}function mt(){t.filterable?_e():I.value?ae(!0):_e()}function gt(e){N.value=e.target.value}function pt(e){const{multiple:n}=t,{value:r}=u;n&&Array.isArray(r)&&e.value!==void 0?ve(e.value):q(null,null,null)}function Ue(){var e;(e=oe.value)===null||e===void 0||e.syncPosition()}function Ee(){var e;(e=te.value)===null||e===void 0||e.syncPosition()}function bt(){I.value&&(L.value?Ue():Ee())}const Ve=b(()=>!!(t.multiple&&t.cascade||S.value!=="child"));qt(ye,{slots:o,mergedClsPrefixRef:l,mergedThemeRef:y,mergedValueRef:u,checkedKeysRef:E,indeterminateKeysRef:re,hoverKeyPathRef:Be,mergedCheckStrategyRef:S,showCheckboxRef:Ve,cascadeRef:$(t,"cascade"),multipleRef:$(t,"multiple"),keyboardKeyRef:P,hoverKeyRef:V,remoteRef:$(t,"remote"),loadingKeySetRef:U,expandTriggerRef:$(t,"expandTrigger"),isMountedRef:Wt(),onLoadRef:$(t,"onLoad"),virtualScrollRef:$(t,"virtualScroll"),optionHeightRef:Z,localeRef:m,labelFieldRef:$(t,"labelField"),renderLabelRef:$(t,"renderLabel"),getColumnStyleRef:$(t,"getColumnStyle"),renderPrefixRef:$(t,"renderPrefix"),renderSuffixRef:$(t,"renderSuffix"),syncCascaderMenuPosition:Ee,syncSelectMenuPosition:Ue,updateKeyboardKey:J,updateHoverKey:ne,addLoadingKey:R,deleteLoadingKey:K,doCheck:ke,doUncheck:ve,closeMenu:ae,handleSelectMenuClickOutside:rt,handleCascaderMenuClickOutside:je,clearPattern:ze});const yt={focus:()=>{var e;(e=F.value)===null||e===void 0||e.focus()},blur:()=>{var e;(e=F.value)===null||e===void 0||e.blur()},getCheckedData:()=>{if(Ve.value){const e=E.value;return{keys:e,options:ue(e)}}return{keys:[],options:[]}},getIndeterminateData:()=>{if(Ve.value){const e=re.value;return{keys:e,options:ue(e)}}return{keys:[],options:[]}}},He=b(()=>{const{self:{optionArrowColor:e,optionTextColor:n,optionTextColorActive:r,optionTextColorDisabled:h,optionCheckMarkColor:i,menuColor:x,menuBoxShadow:s,menuDividerColor:C,menuBorderRadius:v,menuHeight:ce,optionColorHover:me,optionHeight:wt,optionFontSize:kt,loadingColor:Rt,columnWidth:xt},common:{cubicBezierEaseInOut:Ct}}=y.value;return{"--n-bezier":Ct,"--n-menu-border-radius":v,"--n-menu-box-shadow":s,"--n-menu-height":ce,"--n-column-width":xt,"--n-menu-color":x,"--n-menu-divider-color":C,"--n-option-height":wt,"--n-option-font-size":kt,"--n-option-text-color":n,"--n-option-text-color-disabled":h,"--n-option-text-color-active":r,"--n-option-color-hover":me,"--n-option-check-mark-color":i,"--n-option-arrow-color":e,"--n-menu-mask-color":Gt(x,{alpha:.75}),"--n-loading-color":Rt}}),de=g?Qt("cascader",void 0,He,t):void 0;return Object.assign(Object.assign({},yt),{handleTriggerResize:bt,mergedStatus:X,selectMenuFollowerRef:oe,cascaderMenuFollowerRef:te,triggerInstRef:F,selectMenuInstRef:_,cascaderMenuInstRef:p,mergedBordered:a,mergedClsPrefix:l,namespace:c,mergedValue:u,mergedShow:I,showSelectMenu:L,pattern:N,treeMate:B,mergedSize:z,mergedDisabled:D,localizedPlaceholder:xe,selectedOption:O,selectedOptions:Re,adjustedTo:we,menuModel:Le,handleMenuTabout:vt,handleMenuFocus:ct,handleMenuBlur:ft,handleMenuKeydown:it,handleMenuMousedown:ht,handleTriggerFocus:ut,handleTriggerBlur:dt,handleTriggerClick:mt,handleClear:st,handleDeleteOption:pt,handlePatternInput:gt,handleKeydown:De,focused:f,optionHeight:Z,mergedTheme:y,cssVars:g?void 0:He,themeClass:de?.themeClass,onRender:de?.onRender})},render(){const{mergedClsPrefix:t}=this;return d("div",{class:`${t}-cascader`},d(Xt,null,{default:()=>[d(Yt,null,{default:()=>d(Zt,{onResize:this.handleTriggerResize,ref:"triggerInstRef",status:this.mergedStatus,clsPrefix:t,maxTagCount:this.maxTagCount,ellipsisTagPopoverProps:this.ellipsisTagPopoverProps,bordered:this.mergedBordered,size:this.mergedSize,theme:this.mergedTheme.peers.InternalSelection,themeOverrides:this.mergedTheme.peerOverrides.InternalSelection,active:this.mergedShow,pattern:this.pattern,placeholder:this.localizedPlaceholder,selectedOption:this.selectedOption,selectedOptions:this.selectedOptions,multiple:this.multiple,filterable:this.filterable,clearable:this.clearable,disabled:this.mergedDisabled,focused:this.focused,onFocus:this.handleTriggerFocus,onBlur:this.handleTriggerBlur,onClick:this.handleTriggerClick,onClear:this.handleClear,onDeleteOption:this.handleDeleteOption,onPatternInput:this.handlePatternInput,onKeydown:this.handleKeydown},{arrow:()=>{var o,a;return(a=(o=this.$slots).arrow)===null||a===void 0?void 0:a.call(o)}})}),d(Xe,{key:"cascaderMenu",ref:"cascaderMenuFollowerRef",show:this.mergedShow&&!this.showSelectMenu,containerClass:this.namespace,placement:this.placement,width:this.options.length?void 0:"target",teleportDisabled:this.adjustedTo===Fe.tdkey,to:this.adjustedTo},{default:()=>{var o;(o=this.onRender)===null||o===void 0||o.call(this);const{menuProps:a}=this;return d(mn,Object.assign({},a,{ref:"cascaderMenuInstRef",class:[this.themeClass,a?.class],value:this.mergedValue,show:this.mergedShow&&!this.showSelectMenu,menuModel:this.menuModel,style:[this.cssVars,a?.style],onFocus:this.handleMenuFocus,onBlur:this.handleMenuBlur,onKeydown:this.handleMenuKeydown,onMousedown:this.handleMenuMousedown,onTabout:this.handleMenuTabout}),{action:()=>{var l,c;return(c=(l=this.$slots).action)===null||c===void 0?void 0:c.call(l)},empty:()=>{var l,c;return(c=(l=this.$slots).empty)===null||c===void 0?void 0:c.call(l)}})}}),d(Xe,{key:"selectMenu",ref:"selectMenuFollowerRef",show:this.mergedShow&&this.showSelectMenu,containerClass:this.namespace,width:"target",placement:this.placement,to:this.adjustedTo,teleportDisabled:this.adjustedTo===Fe.tdkey},{default:()=>{var o;(o=this.onRender)===null||o===void 0||o.call(this);const{filterMenuProps:a}=this;return d(pn,Object.assign({},a,{ref:"selectMenuInstRef",class:[this.themeClass,a?.class],value:this.mergedValue,show:this.mergedShow&&this.showSelectMenu,pattern:this.pattern,multiple:this.multiple,tmNodes:this.treeMate.treeNodes,filter:this.filter,labelField:this.labelField,separator:this.separator,style:[this.cssVars,a?.style]}))}})]}))}}),kn=ee({name:"PcaCascader",__name:"PcaCascader",setup(t){const o=nn();async function a(){return await fetch("https://cdn.jsdelivr.net/gh/modood/Administrative-divisions-of-China/dist/pca-code.json").then(l=>l.json())}return an(async()=>{o.value=await a()}),(l,c)=>{const g=wn;return at(),lt(g,{options:Q(o),"value-field":"code","label-field":"name","check-strategy":"all",filterable:"",clearable:""},null,8,["options"])}}}),Rn={class:"bg-#eee:30"},xn={class:"bg-#eee:30"},Cn={class:"bg-#eee:30"},Pn=ee({__name:"index",setup(t){const o=k(),a=k(),l=k(),c=k();function g(M,u,S){a.value=M,l.value={code:u.code,name:u.name},c.value=S.map(N=>({code:N.code,name:N.name}))}const y=k(),m=k({region:null});function w(){y.value?.validate(M=>{M?window.$message.error("Invalid"):window.$message.success("Valid")})}return(M,u)=>{const S=un,N=kn,T=dn,z=on,D=cn,X=rn;return at(),lt(X,{title:"省市区联动"},{default:H(()=>[j(S,null,{default:H(()=>[fe("当前选择行政区："+Pe(Q(o)),1)]),_:1}),j(N,{value:Q(o),"onUpdate:value":[u[0]||(u[0]=p=>ln(o)?o.value=p:null),g]},null,8,["value"]),he("div",null,[j(S,null,{default:H(()=>u[2]||(u[2]=[fe("回调value")])),_:1}),he("pre",Rn,"      "+Pe(Q(a))+`
    `,1)]),he("div",null,[j(S,null,{default:H(()=>u[3]||(u[3]=[fe("回调option")])),_:1}),he("pre",xn,"      "+Pe(Q(l))+`
    `,1)]),he("div",null,[j(S,null,{default:H(()=>u[4]||(u[4]=[fe("回调pathValues")])),_:1}),he("pre",Cn,"      "+Pe(Q(c))+`
    `,1)]),j(S,null,{default:H(()=>u[5]||(u[5]=[fe("表单验证")])),_:1}),j(D,{ref_key:"formRef",ref:y,inline:"","label-width":80,model:Q(m)},{default:H(()=>[j(T,{label:"地区",path:"region",rule:[{required:!0,message:"地区必填"}]},{default:H(()=>[j(N,{value:Q(m).region,"onUpdate:value":u[1]||(u[1]=p=>Q(m).region=p)},null,8,["value"])]),_:1}),j(T,null,{default:H(()=>[j(z,{"attr-type":"button",onClick:w},{default:H(()=>u[6]||(u[6]=[fe(" 验证 ")])),_:1})]),_:1})]),_:1},8,["model"])]),_:1})}}});export{Pn as default};
