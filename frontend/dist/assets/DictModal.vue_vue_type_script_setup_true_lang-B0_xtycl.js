import{d as P,hw as b,r as g,ay as j,p as S,o as w,c as y,w as a,b as n,e as M,u as o,m as z,i as A,L as E,B as G,M as H,hg as I}from"./index-Bby_nErz.js";import{_ as J,a as K}from"./FormItem-KNfBvfja.js";import{_ as O}from"./InputNumber-B_O9WtSz.js";const Y=P({__name:"DictModal",props:{modalName:{default:""},dictCode:{},isRoot:{type:Boolean,default:!1}},emits:["open","close"],setup(u,{expose:R,emit:C}){const c=C,{bool:d,setTrue:k,setFalse:T}=b(!1),{bool:B,setTrue:N,setFalse:h}=b(!1),p={label:"",code:""},t=g({...p}),i=j("add"),x=S(()=>`${{add:"添加",view:"查看",edit:"编辑"}[i.value]}${u.modalName}`);async function L(l="add",e){c("open"),i.value=l,k(),await{async add(){t.value={...p},t.value.isRoot=u.isRoot?1:0,u.dictCode&&(t.value.code=u.dictCode)},async view(){e&&(t.value={...e})},async edit(){e&&(t.value={...e})}}[l]()}function f(){T(),h(),c("close")}R({openModal:L});const _=g();async function U(){const l={async add(){return new Promise(e=>{setTimeout(()=>{window.$message.success("模拟新增成功"),e(!0)},2e3)})},async edit(){return new Promise(e=>{setTimeout(()=>{window.$message.success("模拟编辑成功"),e(!0)},2e3)})},async view(){return!0}};await _.value?.validate(),N(),await l[i.value]()&&f()}const V={label:{required:!0,message:"请输入字典名称",trigger:["input","blur"]},code:{required:!0,message:"请输入字典码",trigger:["input","blur"]},value:{required:!0,message:"请输入字典值",type:"number",trigger:["input","blur"]}};return(l,e)=>{const r=E,m=J,$=O,q=K,v=G,D=H,F=I;return w(),y(F,{show:o(d),"onUpdate:show":e[3]||(e[3]=s=>A(d)?d.value=s:null),"mask-closable":!1,preset:"card",title:o(x),class:"w-700px",segmented:{content:!0,action:!0}},{action:a(()=>[n(D,{justify:"center"},{default:a(()=>[n(v,{onClick:f},{default:a(()=>e[4]||(e[4]=[M(" 取消 ")])),_:1}),n(v,{type:"primary",loading:o(B),onClick:U},{default:a(()=>e[5]||(e[5]=[M(" 提交 ")])),_:1},8,["loading"])]),_:1})]),default:a(()=>[n(q,{ref_key:"formRef",ref:_,rules:V,"label-placement":"left",model:o(t),"label-width":100,disabled:o(i)==="view"},{default:a(()=>[n(m,{label:"字典名称",path:"label"},{default:a(()=>[n(r,{value:o(t).label,"onUpdate:value":e[0]||(e[0]=s=>o(t).label=s)},null,8,["value"])]),_:1}),n(m,{label:"字典码",path:"code"},{default:a(()=>[n(r,{value:o(t).code,"onUpdate:value":e[1]||(e[1]=s=>o(t).code=s),disabled:!l.isRoot},null,8,["value","disabled"])]),_:1}),l.isRoot?z("",!0):(w(),y(m,{key:0,label:"字典值",path:"value"},{default:a(()=>[n($,{value:o(t).value,"onUpdate:value":e[2]||(e[2]=s=>o(t).value=s),min:0},null,8,["value"])]),_:1}))]),_:1},8,["model","disabled"])]),_:1},8,["show","title"])}}});export{Y as _};
