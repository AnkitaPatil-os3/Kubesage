import{r as i,z as P,o as _,c as v,w as o,b as a,e as m,A as T,a as n,l as h,F as N,L as k,aB as A,hn as E,B as L,s as R}from"./index-Bby_nErz.js";import{a as F}from"./axios-CCb-kr4I.js";import{N as H}from"./text-BM-U9Ls2.js";import{_ as C,a as O}from"./FormItem-KNfBvfja.js";const I={class:"w-full md:w-1/2"},V={class:"w-full md:w-1/2"},M={class:"w-full md:w-1/2"},$={class:"flex justify-between mt-4"},J={__name:"linux",setup(j){const s=i({ipAdr:"",serverUser:"",serverPass:"",osType:"Ubuntu"}),f=i(null),r=i(!1),g=[{label:"RHEL",value:"RHEL"},{label:"Centos",value:"Centos"},{label:"RedHat",value:"RedHat"},{label:"Fadora",value:"Fadora"},{label:"Ubuntu",value:"Ubuntu"},{label:"SUSE Linux",value:"SUSE Linux"}],u=P(),b=()=>{s.value={ipAdr:"",serverUser:"",serverPass:"",osType:"Ubuntu"}},c=async()=>{r.value=!0;try{const l=await F.post("http://172.16.1.56:8000/api/v3/onboard/",s.value);u.success("Bootstrapping is successful"),console.log("API RESPONSE",l)}catch(l){l.response?u.error(`Bootstrapping process failed: ${l.response.data.message||"Try again."}`):l.request?u.error("Bootstrapping process failed: No response from server. Please try again."):u.error(`Bootstrapping process failed: ${l.message}. Please try again.`)}finally{r.value=!1,b()}};return(l,e)=>{const w=H,d=k,p=C,y=A,U=E,S=L,x=O,B=R;return _(),v(B,{class:"p-6 rounded-lg shadow-md"},{default:o(()=>[a(w,{class:"text-2xl font-bold"},{default:o(()=>e[4]||(e[4]=[m(" Bootstrap the Linux Server ")])),_:1}),a(x,{onSubmit:T(c,["prevent"]),model:s.value,ref_key:"formRef",ref:f},{default:o(()=>[a(p,{label:"Server IP/Hostname",path:"ipAdr"},{default:o(()=>[n("div",I,[a(d,{value:s.value.ipAdr,"onUpdate:value":e[0]||(e[0]=t=>s.value.ipAdr=t),placeholder:"0.0.0.0"},null,8,["value"])])]),_:1}),a(p,{label:"Server Username",path:"serverUser"},{default:o(()=>[n("div",V,[a(d,{value:s.value.serverUser,"onUpdate:value":e[1]||(e[1]=t=>s.value.serverUser=t),placeholder:"Username"},null,8,["value"])])]),_:1}),a(p,{label:"Server Password",path:"serverPass"},{default:o(()=>[n("div",M,[a(d,{value:s.value.serverPass,"onUpdate:value":e[2]||(e[2]=t=>s.value.serverPass=t),"show-password-on":"mousedown",placeholder:"Password",type:"password"},null,8,["value"])])]),_:1}),a(p,{label:"OS Type",path:"osType"},{default:o(()=>[a(y,{value:s.value.osType,"onUpdate:value":e[3]||(e[3]=t=>s.value.osType=t),options:g,placeholder:"Select OS Type",class:"w-full md:w-1/2"},null,8,["value"])]),_:1}),n("div",$,[a(S,{type:"primary",onClick:c,loading:r.value,class:"w-full md:w-auto"},{default:o(()=>[r.value?(_(),v(U,{key:0},{default:o(()=>e[5]||(e[5]=[n("i",{class:"n-icon-loading"},null,-1)])),_:1})):(_(),h(N,{key:1},[m("Submit")],64))]),_:1},8,["loading"])])]),_:1},8,["model"])]),_:1})}}};export{J as default};
