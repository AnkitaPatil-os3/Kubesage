import{_ as B,r as l,s as N,o as u,c as d,w as s,e as t,f as c,v as h,i as f,a as F,F as S,q as C,I as E,hi as I,B as P,l as R}from"./index-BdUTWwbS.js";import{N as T}from"./text-BSS4Ztby.js";import{_ as V,a as q}from"./FormItem-HvJ2BmDO.js";const M={class:"flex justify-between mt-4"},$={__name:"configuration",setup(j){const a=l({kubeconfig_data:""}),m=l(null),n=l(!1),r=N(),i=()=>{a.value={kubeconfig_data:""}},_=async()=>{n.value=!0;try{const o=await C.post("http://172.16.1.56:8000/api/v3/onboardkubernetes/",a.value);r.success("Bootstrapping is successful"),console.log("API RESPONSE from backend",o)}catch(o){o.response?r.error(`Bootstrapping process failed: ${o.response.data.message||"Try again."}`):o.request?r.error("Bootstrapping process failed: No response from server. Please try again."):r.error(`Bootstrapping process failed: ${o.message}. Please try again.`)}finally{n.value=!1,i()}};return(o,e)=>{const g=T,b=E,v=V,k=I,p=P,y=q,w=R;return u(),d(w,{class:"p-6 rounded-lg shadow-md"},{default:s(()=>[t(g,{class:"text-2xl font-bold"},{default:s(()=>e[1]||(e[1]=[c(" Bootstrap the k8s Server ")])),_:1}),t(y,{onSubmit:h(_,["prevent"]),model:a.value,ref_key:"formRef",ref:m},{default:s(()=>[t(v,{label:"Kubeconfig File Content",path:"kubeconfig_data"},{default:s(()=>[t(b,{type:"textarea",value:a.value.kubeconfig_data,"onUpdate:value":e[0]||(e[0]=x=>a.value.kubeconfig_data=x),rows:"5",placeholder:"Enter your kubeconfig data here",class:"w-full"},null,8,["value"])]),_:1}),f("div",M,[t(p,{type:"primary",onClick:_,loading:n.value,class:"w-full md:w-auto"},{default:s(()=>[n.value?(u(),d(k,{key:0},{default:s(()=>e[2]||(e[2]=[f("i",{class:"n-icon-loading"},null,-1)])),_:1})):(u(),F(S,{key:1},[c("Submit")],64))]),_:1},8,["loading"]),t(p,{onClick:i,disabled:n.value,class:"w-full md:w-auto",ghost:""},{default:s(()=>e[3]||(e[3]=[c("Reset")])),_:1},8,["disabled"])])]),_:1},8,["model"])]),_:1})}}},L=B($,[["__scopeId","data-v-dd67b506"]]);export{L as default};
