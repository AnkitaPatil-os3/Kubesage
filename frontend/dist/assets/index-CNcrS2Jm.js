import{_ as k,u as M,s as L,r as b,o,a as n,e as c,w as i,f as v,i as s,F as g,n as _,p as B,t as f,b as Q,v as C,q as V,l as A}from"./index-BdUTWwbS.js";import{N as I}from"./text-BSS4Ztby.js";const P={class:"flex flex-wrap gap-4 p-4"},F={class:"flex flex-col gap-6 w-full mt-4"},N={class:"flex flex-wrap gap-4"},O={class:"d-flex"},$=["src"],z={class:"font-semibold"},E={class:"mt-4"},T={class:"w-full table-auto border-collapse"},R={key:0},U={class:"border p-2"},j={class:"border p-2 text-center"},G=["onClick"],H={__name:"index",setup(J){const x=M(),h=L(),d=b(""),u=b([]),y={PostgreSQL:"/databases/postgres",MySQL:"/databases/mysql","Microsoft SQL Server":"/databases/mssql","Oracle DB":"/databases/oracledb",MongoDB:"/databases/mongodb"},w=(a,e)=>{const t=y[a];if(!t){h.warning("No dashboard available for this database.");return}x.push({path:t,query:{instance:e}})},D={Databases:[{name:"PostgreSQL",icon:"https://img.icons8.com/color/48/postgreesql.png"},{name:"MySQL",icon:"https://img.icons8.com/fluency/48/mysql-logo.png"},{name:"Microsoft SQL Server",icon:"https://img.icons8.com/color/48/microsoft-sql-server.png"},{name:"Oracle DB",icon:"https://img.icons8.com/color/48/oracle-logo.png"},{name:"MongoDB",icon:"https://img.icons8.com/color/48/mongodb.png"}]},q=async a=>{d.value=a,u.value=[];let e=[];try{if(a==="PostgreSQL"){const t=await V.get("https://10.0.34.212:9090/api/v1/query?query=count(pg_up)by(instance)");t.data.status==="success"&&t.data.data.result.length>0&&(e=t.data.data.result.map(l=>({instance:`postgresql://${l.metric.instance}`})))}else a==="MySQL"?e=[{instance:"mysql://10.0.34.221:3306/"},{instance:"mysql://10.0.34.223:3306/"}]:a==="Microsoft SQL Server"?e=[{instance:"mssql://10.0.34.224:1433/"},{instance:"mssql://10.0.34.225:1433/"}]:a==="Oracle DB"?e=[{instance:"oracle://10.0.34.226:1521/"},{instance:"oracle://10.0.34.227:1521/"}]:a==="MongoDB"&&(e=[{instance:"mongodb://10.0.34.228:27017/"},{instance:"mongodb://10.0.34.229:27017/"}]);u.value=e}catch(t){console.error("Error fetching agent details:",t),h.error("Failed to fetch agent details")}};return(a,e)=>{const t=I,l=A;return o(),n("div",P,[c(l,{class:"p-4 w-full md:w-4/4 shadow-md rounded-lg"},{default:i(()=>[c(t,{class:"text-lg font-bold"},{default:i(()=>e[0]||(e[0]=[v("Databases Dashboards ")])),_:1}),s("div",F,[(o(),n(g,null,_(D,(p,m)=>s("div",{key:m},[s("div",N,[(o(!0),n(g,null,_(p,(r,S)=>(o(),n("div",{key:S},[c(l,{class:B(["hover-card w-70",{"selected-card":d.value===r.name}]),onClick:K=>q(r.name)},{default:i(()=>[s("div",O,[s("img",{src:r.icon,alt:"Agent Icon",class:"mr-2",style:{width:"40px",height:"40px"}},null,8,$),s("span",z,f(r.name),1)])]),_:2},1032,["class","onClick"])]))),128))])])),64))])]),_:1}),c(l,{class:"p-4 w-full md:w-4/4 shadow-md rounded-lg mt-6"},{default:i(()=>[c(t,{class:"text-lg font-bold"},{default:i(()=>[v("Database Instances - "+f(d.value),1)]),_:1}),s("div",E,[s("table",T,[e[2]||(e[2]=s("thead",null,[s("tr",null,[s("th",{class:"border p-2 bg-gray-200"},"Instance"),s("th",{class:"border p-2 bg-gray-200"},"Dashboard")])],-1)),s("tbody",null,[u.value.length===0?(o(),n("tr",R,e[1]||(e[1]=[s("td",{class:"border p-2 text-center",colspan:"2"},"No agent onboard yet",-1)]))):Q("",!0),(o(!0),n(g,null,_(u.value,(p,m)=>(o(),n("tr",{key:m},[s("td",U,f(p.instance),1),s("td",j,[s("a",{href:"#",onClick:C(r=>w(d.value,p.instance),["prevent"]),class:"text-blue-600 hover:underline cursor-pointer"}," View Dashboard ",8,G)])]))),128))])])])]),_:1})])}}},Y=k(H,[["__scopeId","data-v-9ace19f3"]]);export{Y as default};
