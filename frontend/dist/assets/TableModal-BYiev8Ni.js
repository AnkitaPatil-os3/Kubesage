import{d as S,hr as k,r as m,av as h,j as z,o as A,c as E,w as n,e as t,f as r,g as a,H as G,I as K,J as O,ay as Q,h0 as W,B as X,hb as Y}from"./index-BdUTWwbS.js";import{b as Z}from"./system-iXn0uc5Z.js";import{_ as ee}from"./FormItemGridItem-DZOk8wCA.js";import{_ as te}from"./Radio-CdMCgcPL.js";import{_ as ne}from"./RadioGroup-CVgq5Ckq.js";import{a as ae}from"./Grid-DzHw3MPy.js";import{a as oe}from"./FormItem-HvJ2BmDO.js";const me=S({__name:"TableModal",props:{modalName:{default:""}},emits:["open","close"],setup(N,{expose:M,emit:x}){const _=x,{bool:p,setTrue:T,setFalse:U}=k(!1),{bool:R,setTrue:B,setFalse:L}=k(!1),f={userName:"",email:"",tel:"",role:[],status:1},o=m({...f}),d=h("add"),C=z(()=>`${{add:"添加",view:"查看",edit:"编辑"}[d.value]}${N.modalName}`);async function $(s="add",e){_("open"),d.value=s,T(),F(),await{async add(){o.value={...f}},async view(){e&&(o.value={...e})},async edit(){e&&(o.value={...e})}}[s]()}function c(){U(),L(),_("close")}M({openModal:$});const v=m();async function V(){const s={async add(){return new Promise(e=>{setTimeout(()=>{window.$message.success("模拟新增成功"),e(!0)},2e3)})},async edit(){return new Promise(e=>{setTimeout(()=>{window.$message.success("模拟编辑成功"),e(!0)},2e3)})},async view(){return!0}};await v.value?.validate(),B(),await s[d.value]()&&c()}const j={userName:{required:!0,message:"请输入用户名",trigger:"blur"}},g=m();async function F(){const{data:s}=await Z();g.value=s}return(s,e)=>{const i=K,u=ee,b=te,w=O,P=ne,q=Q,D=W,H=ae,I=oe,y=X,J=Y;return A(),E(J,{show:a(p),"onUpdate:show":e[7]||(e[7]=l=>G(p)?p.value=l:null),"mask-closable":!1,preset:"card",title:a(C),class:"w-700px",segmented:{content:!0,action:!0}},{action:n(()=>[t(w,{justify:"center"},{default:n(()=>[t(y,{onClick:c},{default:n(()=>e[12]||(e[12]=[r(" 取消 ")])),_:1}),t(y,{type:"primary",loading:a(R),onClick:V},{default:n(()=>e[13]||(e[13]=[r(" 提交 ")])),_:1},8,["loading"])]),_:1})]),default:n(()=>[t(I,{ref_key:"formRef",ref:v,rules:j,"label-placement":"left",model:a(o),"label-width":100,disabled:a(d)==="view"},{default:n(()=>[t(H,{cols:2,"x-gap":18},{default:n(()=>[t(u,{span:1,label:"用户名",path:"userName"},{default:n(()=>[t(i,{value:a(o).userName,"onUpdate:value":e[0]||(e[0]=l=>a(o).userName=l)},null,8,["value"])]),_:1}),t(u,{span:1,label:"性别",path:"gender"},{default:n(()=>[t(P,{value:a(o).gender,"onUpdate:value":e[1]||(e[1]=l=>a(o).gender=l)},{default:n(()=>[t(w,null,{default:n(()=>[t(b,{value:1},{default:n(()=>e[8]||(e[8]=[r(" 男 ")])),_:1}),t(b,{value:0},{default:n(()=>e[9]||(e[9]=[r(" 女 ")])),_:1})]),_:1})]),_:1},8,["value"])]),_:1}),t(u,{span:1,label:"邮箱",path:"email"},{default:n(()=>[t(i,{value:a(o).email,"onUpdate:value":e[2]||(e[2]=l=>a(o).email=l)},null,8,["value"])]),_:1}),t(u,{span:1,label:"联系方式",path:"tel"},{default:n(()=>[t(i,{value:a(o).tel,"onUpdate:value":e[3]||(e[3]=l=>a(o).tel=l)},null,8,["value"])]),_:1}),t(u,{span:2,label:"角色",path:"role"},{default:n(()=>[t(q,{value:a(o).role,"onUpdate:value":e[4]||(e[4]=l=>a(o).role=l),multiple:"",filterable:"","label-field":"role","value-field":"id",options:a(g)},null,8,["value","options"])]),_:1}),t(u,{span:2,label:"备注",path:"remark"},{default:n(()=>[t(i,{value:a(o).remark,"onUpdate:value":e[5]||(e[5]=l=>a(o).remark=l),type:"textarea"},null,8,["value"])]),_:1}),t(u,{span:1,label:"用户状态",path:"status"},{default:n(()=>[t(D,{value:a(o).status,"onUpdate:value":e[6]||(e[6]=l=>a(o).status=l),"checked-value":1,"unchecked-value":0},{checked:n(()=>e[10]||(e[10]=[r(" 启用 ")])),unchecked:n(()=>e[11]||(e[11]=[r(" 禁用 ")])),_:1},8,["value"])]),_:1})]),_:1})]),_:1},8,["model","disabled"])]),_:1},8,["show","title"])}}});export{me as default};
