import{_ as J,s as j,r as S,m as Y,o as _,a as g,e as o,w as u,g as l,f as E,i as s,F as D,n as L,t as w,l as I,p as z,I as b,B as U,b as k,q as H}from"./index-BdUTWwbS.js";import{N as x}from"./text-BSS4Ztby.js";const X={class:"flex flex-wrap gap-4 p-4"},Z={class:"flex flex-col gap-6 w-full mt-4"},ee={class:"text-lg font-bold mb-2"},se={class:"flex flex-wrap gap-4"},ae={class:"d-flex"},te=["src"],oe={class:"font-semibold"},le={key:0,class:"modal-overlay"},ne={class:"modal-container"},re={class:"mt-4"},de={class:"mb-4 d-flex"},ie={class:"mb-4 d-flex"},pe={class:"mb-4 d-flex"},me={class:"mb-4 d-flex"},ce={class:"mb-4 d-flex"},ue={key:1,class:"modal-overlay"},ve={class:"modal-container"},_e={class:"mt-4"},ge={class:"mb-4 d-flex"},be={class:"mb-4 d-flex"},Se={class:"mb-4 d-flex"},he={key:2,class:"flex mt-6 w-full"},fe={class:"mt-4"},$e={class:"w-full table-auto border-collapse"},Ae={class:"border p-2"},Pe={class:"border p-2"},Ee={class:"border p-2"},we={class:"border p-2"},Me={__name:"index",setup(Re){const p=JSON.parse(localStorage.getItem("keycloakId")).value,y=j();console.log("Keycloak ID:",p);const B={"Operating Systems":[{name:"Linux",icon:"https://img.icons8.com/color/48/linux--v1.png"},{name:"Windows",icon:"https://img.icons8.com/color/48/windows-10.png"}],"Containers & Orchestration":[{name:"Kubernetes",icon:"https://img.icons8.com/color/48/kubernetes.png"},{name:"Docker",icon:"https://img.icons8.com/fluency/48/docker.png"}],Databases:[{name:"PostgreSQL",icon:"https://img.icons8.com/color/48/postgreesql.png"},{name:"MySQL",icon:"https://img.icons8.com/fluency/48/mysql-logo.png"},{name:"Microsoft SQL Server",icon:"https://img.icons8.com/color/48/microsoft-sql-server.png"},{name:"Oracle DB",icon:"https://img.icons8.com/color/48/oracle-logo.png"},{name:"MongoDB",icon:"https://img.icons8.com/color/48/mongodb.png"}],Applications:[{name:"Application - Java",icon:"https://img.icons8.com/fluency/48/java-coffee-cup-logo.png"}]},h="10.0.32.122",r="10.0.34.212",c="10.0.34.144",v=S(""),M=S(!1),f=S(!1),C=S(!1),N=S([]),d=S(""),n=S({dbName:"",dbIp:"",dbPort:"",dbUsername:"",dbPassword:""}),G={Linux:`curl -o kubeSage-agent_linux-v3.sh http://${c}/kubeSage-agent_linux-v3.sh && kubeSage_UID=${p} METRIC_SRV="http://${r}:9090/api/v1/write" LOGS_SRV="http://${r}:3100/loki/api/v1/push" kubeSage_BACK_SRV="https://${h}:8000/api/v1/agents/" bash ./kubeSage-agent_linux-v3.sh`,Windows:`curl -o "$env:USERPROFILE/Downloads/kubeSage-agent_windows-v2.ps1" http://${c}/kubeSage-agent_windows-v2.ps1; if (Test-Path "$env:USERPROFILE/Downloads/kubeSage-agent_windows-v2.ps1") { & "$env:USERPROFILE/Downloads/kubeSage-agent_windows-v2.ps1" -KeycloakId "${p}" -AgentName "Windows" -IPAddress "${h}" -prometheus "${r}" -loki "${r}" } else { Write-Host "Failed to download kubeSage-agent_windows-v2.ps1." }`,Kubernetes:`helm repo add kubeSage-stable http://${c}/kubeSage-k8s-monitoring/ && helm repo update && helm install kubeSage-k8s-monitoring --namespace kubeSage-monitoring --create-namespace --set agentDeployment.kubeSageUid="${p}" --set cluster.name="MyCluster" --set agentDeployment.agentName="Kubernetes" --set agentDeployment.apiEndpoint="https://${h}/api/v1/agents/" --set externalServices.prometheus.host="http://${r}:9090" --set externalServices.loki.host="http://${r}:3100" --set externalServices.tempo.host="http://${r}:3200" kubeSage-stable/kubeSage-k8s-monitoring`,Docker:`curl -o kubeSage-agent_docker-v1.sh http://${c}/kubeSage-agent_docker-v1.sh && kubeSage_UID=${p} kubeSage_BACK_SRV="https://${h}:8000/api/v1/agents/"   METRIC_SRV="http://${r}:9090/api/v1/write" LOGS_SRV="http://${r}:3100/loki/api/v1/push" bash ./kubeSage-agent_docker-v1.sh`},Q=t=>{v.value=t,console.log("Selected Agent:",t);const e=["PostgreSQL","MySQL","Microsoft SQL Server","Oracle DB","MongoDB"],a=["Linux","Windows","Kubernetes","Docker"];e.includes(t)?M.value=!0:M.value=!1,a.includes(t)?(d.value=G[t],f.value=!1):t.includes("Java")||t==="JVM"||t==="Spring Boot"?(f.value=!0,d.value=""):(f.value=!1,d.value="")},T=()=>{const{dbName:t,dbIp:e,dbPort:a,dbUsername:m,dbPassword:i,appName:R,appIp:O,appPort:F}=n.value,$=`https://${h}:8000/api/v1/agents/`,A=`http://${r}:9090/api/v1/write`,P=`http://${r}:3100/loki/api/v1/push`,W=`http://${r}:4317`;v.value==="PostgreSQL"?d.value=`curl -o kubeSage-agent_postgresql-v1.sh http://${c}/kubeSage-agent_postgresql-v1.sh && kubeSage_UID=${p} kubeSage_BACK_SRV="${$}" METRIC_SRV="${A}" LOGS_SRV="${P}" PSQL_USERNAME="${m}" PSQL_PASSWORD="${i}" PSQL_DB_NAME="${t}" PSQL_IP="${e}" PSQL_PORT="${a}" bash ./kubeSage-agent_postgresql-v1.sh`:v.value==="MySQL"?d.value=`curl -o kubeSage-agent_mysql-v1.sh http://${c}/kubeSage-agent_mysql-v1.sh && kubeSage_UID=${p} kubeSage_BACK_SRV="${$}" METRIC_SRV="${A}" LOGS_SRV="${P}" MY_SQL_USERNAME="${m}" MY_SQL_PASSWORD="${i}" MY_SQL_DB_NAME="${t}" MY_SQL_IP="${e}" MY_SQL_PORT="${a}" bash ./kubeSage-agent_mysql-v1.sh`:v.value==="Microsoft SQL Server"?d.value=`curl -o kubeSage-agent_ms-sql-v1.sh http://${c}/kubeSage-agent_ms-sql-v1.sh && kubeSage_UID=${p} kubeSage_BACK_SRV="${$}" METRIC_SRV="${A}" LOGS_SRV="${P}" MS_SQL_USERNAME="${m}" MS_SQL_PASSWORD="${i}" MS_SQL_DB_NAME="${t}" MS_SQL_IP="${e}" MS_SQL_PORT="${a}" bash ./kubeSage-agent_ms-sql-v1.sh`:v.value==="Oracle DB"?d.value=`curl -o kubeSage-agent_oracle_db-v1.sh http://${c}/kubeSage-agent_oracle_db-v1.sh && kubeSage_UID=${p} kubeSage_BACK_SRV="${$}" METRIC_SRV="${A}" LOGS_SRV="${P}" ORACLE_DB_USERNAME="${m}" ORACLE_DB_PASSWORD="${i}" ORACLE_DB_NAME="${t}" ORACLE_DB_IP="${e}" ORACLE_DB_PORT="${a}" bash ./kubeSage-agent_oracle_db-v1.sh`:v.value==="MongoDB"&&(d.value=`curl -o kubeSage-agent_mongo_db-v1.sh http://${c}/kubeSage-agent_mongo_db-v1.sh && kubeSage_UID=${p} kubeSage_BACK_SRV="${$}" METRIC_SRV="${A}" LOGS_SRV="${P}" MON_SQL_USERNAME="${m}" MON_SQL_PASSWORD="${i}" MON_SQL_DB_NAME="${t}" MON_SQL_IP="${e}" MON_SQL_PORT="${a}" bash ./kubeSage-agent_mongo_db-v1.sh`),v.value==="Application - Java"&&(d.value=`curl -o kubeSage-agent_app-java-v1.sh http://${c}/kubeSage-agent_app-java-v1.sh && kubeSage_UID=${p} METRIC_SRV="${A}" kubeSage_BACK_SRV="${$}" LOGS_SRV="${P}" TRACE_SRV="${W}" APP_NAME="${R}" APP_IP="${O}" APP_PORT="${F}" bash ./kubeSage-agent_app-java-v1.sh`),M.value=!1},q=()=>{const{appName:t,appIp:e,appPort:a}=n.value,m=`https://${h}:8000/api/v1/agents/`,i=`http://${r}:9090/api/v1/write`,R=`http://${r}:3100/loki/api/v1/push`,O=`http://${r}:4317`;v.value==="Application - Java"&&(d.value=`curl -o kubeSage-agent_app-java-v1.sh http://${c}/kubeSage-agent_app-java-v1.sh && kubeSage_UID=${p} METRIC_SRV="${i}" kubeSage_BACK_SRV="${m}" LOGS_SRV="${R}" TRACE_SRV="${O}" APP_NAME="${t}" APP_IP="${e}" APP_PORT="${a}" bash ./kubeSage-agent_app-java-v1.sh`),f.value=!1},K=()=>{const t=d.value;t&&navigator.clipboard.writeText(t).then(()=>{C.value=!0,y.success("Command copied to clipboard!"),setTimeout(()=>{C.value=!1},3e3)}).catch(e=>{y.error("Failed to copy command."),console.error("Error copying command:",e)})},V=()=>{M.value=!1,f.value=!1};return Y(async()=>{try{const t=await H.get("/api/v1/agents/");N.value=t.data}catch(t){console.error("Error fetching agent details:",t)}}),(t,e)=>(_(),g("div",X,[o(l(I),{class:"p-4 w-full md:w-4/4 shadow-md rounded-lg"},{default:u(()=>[o(l(x),{class:"text-lg font-bold"},{default:u(()=>e[11]||(e[11]=[E("Agents")])),_:1}),s("div",Z,[(_(),g(D,null,L(B,(a,m)=>s("div",{key:m},[s("h2",ee,w(m),1),s("div",se,[(_(!0),g(D,null,L(a,(i,R)=>(_(),g("div",{key:R},[o(l(I),{class:z(["hover-card w-70",{"selected-card":v.value===i.name,"activated-card":v.value===i.name}]),onClick:O=>Q(i.name)},{default:u(()=>[s("div",ae,[s("img",{src:i.icon,alt:"Agent Icon",class:"mr-2",style:{width:"40px",height:"40px"}},null,8,te),s("span",oe,w(i.name),1)])]),_:2},1032,["class","onClick"])]))),128))])])),64))]),M.value?(_(),g("div",le,[s("div",ne,[o(l(I),{class:"p-4 shadow-md rounded-lg"},{default:u(()=>[o(l(x),{class:"text-lg font-bold"},{default:u(()=>e[12]||(e[12]=[E("Enter Database Details")])),_:1}),s("button",{class:"close-modal-btn",onClick:V},"✖"),s("form",null,[s("div",re,[s("div",de,[e[13]||(e[13]=s("label",{for:"dbName",class:"block text-sm font-medium w-1/3"},"Database Name",-1)),o(l(b),{value:n.value.dbName,"onUpdate:value":e[0]||(e[0]=a=>n.value.dbName=a),id:"dbName",placeholder:"Enter Database Name",required:"",class:"w-2/3"},null,8,["value"])]),s("div",ie,[e[14]||(e[14]=s("label",{for:"dbIp",class:"block text-sm font-medium w-1/3"},"DB Server Address",-1)),o(l(b),{value:n.value.dbIp,"onUpdate:value":e[1]||(e[1]=a=>n.value.dbIp=a),id:"dbIp",placeholder:"Enter Database IP",required:"",class:"w-2/3"},null,8,["value"])]),s("div",pe,[e[15]||(e[15]=s("label",{for:"dbPort",class:"block text-sm font-medium w-1/3"},"DB IP Port",-1)),o(l(b),{value:n.value.dbPort,"onUpdate:value":e[2]||(e[2]=a=>n.value.dbPort=a),id:"dbPort",placeholder:"Enter Database Port",required:"",class:"w-2/3"},null,8,["value"])]),s("div",me,[e[16]||(e[16]=s("label",{for:"dbUsername",class:"block text-sm font-medium w-1/3"},"Username",-1)),o(l(b),{value:n.value.dbUsername,"onUpdate:value":e[3]||(e[3]=a=>n.value.dbUsername=a),id:"dbUsername",placeholder:"Enter Username",required:"",class:"w-2/3"},null,8,["value"])]),s("div",ce,[e[17]||(e[17]=s("label",{for:"dbPassword",class:"block text-sm font-medium w-1/3"},"Password",-1)),o(l(b),{value:n.value.dbPassword,"onUpdate:value":e[4]||(e[4]=a=>n.value.dbPassword=a),id:"dbPassword",placeholder:"Enter Password",required:"",type:"password",class:"w-2/3"},null,8,["value"])])]),o(l(U),{type:"primary","html-type":"submit",class:"mt-4",onClick:e[5]||(e[5]=a=>T())},{default:u(()=>e[18]||(e[18]=[E("Generate Command")])),_:1})])]),_:1})])])):k("",!0),f.value?(_(),g("div",ue,[s("div",ve,[o(l(I),{class:"p-4 shadow-md rounded-lg"},{default:u(()=>[o(l(x),{class:"text-lg font-bold"},{default:u(()=>e[19]||(e[19]=[E("Enter Java Application Details")])),_:1}),s("button",{class:"close-modal-btn",onClick:V},"✖"),s("form",null,[s("div",_e,[s("div",ge,[e[20]||(e[20]=s("label",{for:"appName",class:"block text-sm font-medium w-1/3"},"Application Name",-1)),o(l(b),{value:n.value.appName,"onUpdate:value":e[6]||(e[6]=a=>n.value.appName=a),id:"appName",placeholder:"Enter Application Name",required:"",class:"w-2/3"},null,8,["value"])]),s("div",be,[e[21]||(e[21]=s("label",{for:"appIp",class:"block text-sm font-medium w-1/3"},"Application IP",-1)),o(l(b),{value:n.value.appIp,"onUpdate:value":e[7]||(e[7]=a=>n.value.appIp=a),id:"appIp",placeholder:"Enter Application IP",required:"",class:"w-2/3"},null,8,["value"])]),s("div",Se,[e[22]||(e[22]=s("label",{for:"appPort",class:"block text-sm font-medium w-1/3"},"Application Port",-1)),o(l(b),{value:n.value.appPort,"onUpdate:value":e[8]||(e[8]=a=>n.value.appPort=a),id:"appPort",placeholder:"Enter Application Port",required:"",class:"w-2/3"},null,8,["value"])])]),o(l(U),{type:"primary","html-type":"submit",class:"mt-4",onClick:e[9]||(e[9]=a=>q())},{default:u(()=>e[23]||(e[23]=[E("Generate Command")])),_:1})])]),_:1})])])):k("",!0),d.value?(_(),g("div",he,[o(l(b),{modelValue:d.value,"onUpdate:modelValue":e[10]||(e[10]=a=>d.value=a),class:"dark:text-gray-800 border-gray-400 resize-none placeholder-gray-800",type:"textarea",readonly:"",placeholder:d.value,style:{"--n-placeholder-color":"#6b7280",width:"100%",height:"120px"},onClick:K},null,8,["modelValue","placeholder"])])):k("",!0)]),_:1}),o(l(I),{class:"p-4 w-full md:w-4/4 shadow-md rounded-lg mt-6"},{default:u(()=>[o(l(x),{class:"text-lg font-bold"},{default:u(()=>e[24]||(e[24]=[E("Agent Details")])),_:1}),s("div",fe,[s("table",$e,[e[25]||(e[25]=s("thead",null,[s("tr",null,[s("th",{class:"border p-2"},"Host Name"),s("th",{class:"border p-2"},"IP Address"),s("th",{class:"border p-2"},"Agent Name"),s("th",{class:"border p-2"},"Status")])],-1)),s("tbody",null,[(_(!0),g(D,null,L(N.value,(a,m)=>(_(),g("tr",{key:m},[s("td",Ae,w(a.host_name),1),s("td",Pe,w(a.ip_port),1),s("td",Ee,w(a.agent_name),1),s("td",we,w(a.status),1)]))),128))])])])]),_:1})]))}},Le=J(Me,[["__scopeId","data-v-f1b32988"]]);export{Le as default};
